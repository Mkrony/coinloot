import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import Cookies from 'js-cookie';
import CirclecashAnimation from "../Animations/CirclecashAnimation.jsx";
const Logout = () => {
    const [loading, setLoading] = useState(true);
    const navigate = useNavigate();

    useEffect(() => {
        // Function to handle logout logic
        const handleLogout = () => {
            // Clear specific cookies using js-cookie
            Cookies.remove("token");

            // Clear all cookies manually if needed
            document.cookie.split(';').forEach(cookie => {
                const cookieName = cookie.split('=')[0].trim();
                document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`;
            });

            // Clear session and local storage
            sessionStorage.clear();
            localStorage.clear();
            // Clear any additional tokens
            localStorage.removeItem('access_token');
            localStorage.removeItem('id_token');
            localStorage.removeItem('expires_at');

            // Simulate a delay for smooth logout experience
            setTimeout(() => {
                setLoading(false);
                navigate('/');
                // window.location.href = '/';
            }, 1000); // Adjust the delay time for smoother experience
        };

        handleLogout();
    }, [navigate]);
    if (loading) {
        // Show a loading spinner or message
        return (
            <div className="logout-loading">
                <div className="spinner-border text-primary" role="status">
                    <span className="visually-hidden">Logging you out...</span>
                </div>
               <div className="d-flex flex-row justify-content-center align-items-center vh-100">
                   <div className="preloader d-flex flex-column justify-content-center align-items-center">
                       <CirclecashAnimation/>
                       <h4>Logging you out...</h4>
                   </div>
               </div>
            </div>
        );
    }

    return null; // No UI needed once logout is complete and redirect occurs
};

export default Logout;
